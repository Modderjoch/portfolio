---
const { project } = Astro.props;
import PillLink from "../general/PillLink.astro";
import GithubLogo from "../../assets/images/logos/github.svg";
import ExternalLogo from "../../assets/images/icons/external-link.svg";
import TagLogo from "../../assets/images/icons/tag.svg";
import { Image } from "astro:assets";
import Video from "../visuals/Video.astro";
---

<div
    id={`modal-${project.slug}`}
    class="fixed inset-0 z-50 hidden items-center justify-center backdrop-blur-sm bg-black/40"
>
    <div class="absolute inset-0 modal-backdrop"></div>

    <div
        class="relative max-w-4xl w-full mx-6 bg-white dark:bg-slate-950 rounded-md overflow-hidden shadow-2xl"
    >
        <button
            class="absolute top-4 right-4 text-neutral-400 hover:text-white text-2xl modal-close"
        >
            Ã—
        </button>

        <div class="flex flex-col">
            <div
                class="px-6 py-4 border-b border-neutral-200 dark:border-neutral-800"
            >
                <h2 class="text-2xl font-bold">{project.data.title}</h2>
            </div>

            <div class="p-6">
                <div class="relative rounded-xl overflow-hidden shadow-lg">
                    {
                        project.data.video ? (
                            <Video
                                src={project.data.video}
                                type="youtube"
                                class="w-full h-[360px]"
                            />
                        ) : (
                            <Image
                                src={project.data.thumbnail}
                                alt={project.data.title}
                                width={640}
                                height={360}
                                class="w-full h-[360px] object-cover"
                            />
                        )
                    }

                    <div
                        class="absolute inset-x-0 bottom-0 flex justify-start p-4 gap-3 bg-gradient-to-t from-black/60 to-transparent"
                    >
                        <PillLink
                            href={`/projects/${project.slug}`}
                            label="Full project"
                            width="140px"
                            behavior="new"
                            Logo={ExternalLogo}
                            class="pointer-events-auto"
                        />

                        {
                            project.data.github && (
                                <PillLink
                                    href={project.data.github}
                                    label="GitHub"
                                    width="140px"
                                    behavior="new"
                                    Logo={GithubLogo}
                                    class="pointer-events-auto"
                                />
                            )
                        }
                    </div>
                </div>
            </div>

            <div class="px-8 pb-8 space-y-4">
                <p class="text-neutral-500 dark:text-neutral-400">
                    {project.data.summary}
                </p>

                <div class="flex flex-wrap gap-2">
                    <TagLogo class="w-4 h-4 text-orange-500" />
                    {
                        project.data.tags?.map((t: string) => (
                            <span
                                class="bg-orange-500 text-white text-xs px-3 py-1 rounded"
                                style="font-weight: bold;"
                            >
                                {t}
                            </span>
                        ))
                    }
                </div>
            </div>
        </div>
    </div>
</div>
